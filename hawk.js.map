{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///hawk.js","webpack:///webpack/bootstrap 528c47b8a926fca75e52","webpack:///./src/modules/logger.js","webpack:///./src/modules/hawk.js","webpack:///./src/config.js","webpack:///./src/main.js","webpack:///./src/modules/websocket.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","log","message","type","arg","window","console","undefined","config","websocket","logger","ws","_token","_revision","init","_ref","token","host","port","path","secure","revision","socket","onmessage","socketHandlers","onclose","close","addEventListener","errorHandler","data","JSON","parse","e","ErrorEvent","error","error_location","file","filename","line","lineno","col","colno","location","url","href","origin","hostname","pathname","stack","stacktrace","time","Date","now","navigator","ua","userAgent","frame","width","innerWidth","height","innerHeight","send","test","options","STATES","CONNECTING","OPEN","CLOSING","CLOSED","Promise","resolve","reject","protocol","WebSocket","onopen","reconnect","attempts","arguments","length","then","catch","stringify","readyState"],"mappings":"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","file":"hawk.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hawk\"] = factory();\n\telse\n\t\troot[\"hawk\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"hawk\"] = factory();\n\telse\n\t\troot[\"hawk\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 3);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Logger module\n *\n * @usage\n * logger.log('We got an error', 'error')\n *\n * @param message\n * @param type - log type: error, warn, info, log, etc.\n * @param {*} arg - logging argument\n */\nmodule.exports.log = function (message, type, arg) {\n    type = type || 'info';\n\n    message = '[CodeX Hawk]: ' + message;\n\n    if ('console' in window && window.console[type]) {\n        if (arg !== undefined) {\n            window.console[type](message, arg);\n        } else {\n            window.console[type](message);\n        }\n    }\n};\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*!\n * Codex Hawk client side module\n * https://github.com/codex-team/hawk.client\n *\n * Codex Hawk - https://hawk.so\n * Codex Team - https://ifmo.su\n *\n * @license MIT (c) CodeX 2017\n */\nmodule.exports = function () {\n    'use strict';\n\n    var config = __webpack_require__(2),\n        websocket = __webpack_require__(4),\n        logger = __webpack_require__(0),\n        ws = null,\n        _token = void 0,\n        _revision = void 0;\n\n    /**\n     * Hawk client constructor\n     * @param  {string} token      personal token\n     * @param  {string} host        optional: client catcher hostname\n     * @param  {Number} port        optional: client catcher port\n     * @param  {string} path        hawk catcher route\n     * @param  {Boolean} secure     pass FALSE to disable secure connection\n     * @param  {string} revision    identifier of bundle's revision\n     */\n    var init = function init(_ref) {\n        var token = _ref.token,\n            host = _ref.host,\n            port = _ref.port,\n            path = _ref.path,\n            secure = _ref.secure,\n            revision = _ref.revision;\n\n        config.socket.host = host || config.socket.host;\n        config.socket.port = port || config.socket.port;\n        config.socket.path = path || config.socket.path;\n        config.socket.secure = secure !== undefined ? secure : config.socket.secure;\n\n        if (!token) {\n            logger.log('Please, pass your verification token for Hawk error tracker. You can get it on hawk.so', 'warn');\n            return;\n        }\n\n        _token = token;\n\n        if (revision) {\n            _revision = revision;\n        }\n\n        var socket = config.socket;\n\n        socket.onmessage = socketHandlers.message;\n        socket.onclose = socketHandlers.close;\n\n        ws = websocket(socket);\n\n        window.addEventListener('error', errorHandler);\n    };\n\n    var socketHandlers = {\n\n        message: function message(data) {\n            var message = void 0,\n                type = void 0;\n\n            try {\n                data = JSON.parse(data.data);\n                type = data.type;\n                message = data.message;\n            } catch (e) {\n                message = data.data;\n                type = 'info';\n            }\n\n            logger.log('Hawk says: ' + message, type);\n        },\n\n        close: function close() {\n            logger.log('Connection lost. Errors won\\'t be save. Please, refresh the page', 'warn');\n        }\n\n    };\n\n    /**\n     * Error event handler.\n     * Get error params and send to Hawk server\n     *\n     * @param ErrorEvent\n     */\n    var errorHandler = function errorHandler(ErrorEvent) {\n        var error = {\n            token: _token,\n            message: ErrorEvent.message,\n            'error_location': {\n                file: ErrorEvent.filename,\n                line: ErrorEvent.lineno,\n                col: ErrorEvent.colno,\n                revision: _revision || null\n            },\n            location: {\n                url: window.location.href,\n                origin: window.location.origin,\n                host: window.location.hostname,\n                path: window.location.pathname,\n                port: window.location.port\n            },\n            stack: ErrorEvent.error.stack || ErrorEvent.error.stacktrace,\n            time: Date.now(),\n            navigator: {\n                ua: window.navigator.userAgent,\n                frame: {\n                    width: window.innerWidth,\n                    height: window.innerHeight\n                }\n            }\n        };\n\n        ws.send(error);\n    };\n\n    var test = function test() {\n        var fakeEvent = {\n            message: 'Hawk client catcher test',\n            filename: 'hawk.js',\n            lineno: 0,\n            colno: 0,\n            error: {\n                stack: 'hawk.js'\n            }\n        };\n\n        errorHandler(fakeEvent);\n    };\n\n    return {\n        init: init,\n        test: test\n    };\n}();\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = {\n\n    socket: {\n        host: 'hawk.so',\n        path: 'catcher/client',\n        port: 8070,\n        secure: true\n    }\n\n};\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nmodule.exports = __webpack_require__(1);\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Native websocket module\n * Open new websocket connection using native WebSocket object\n *\n * @usage\n * var ws = new websocket({\n *  host: 'localhost',\n *  path: 'socket',\n *  port: 80000,\n *  onmessage: messageHandler\n * })\n *\n * @param {Object} options\n *\n * Server properties\n * @param {String} options.host - WebSocket server host\n * @param {String} options.path - WebSocket server path\n * @param {Number} options.port - WebSocket server port\n * @param {Boolean} options.secure - if True, uses wss protocol, else ws\n *\n * Events handlers\n * @param {Function} options.onopen - fires when connection have been opened\n * @param {Function} options.onmessage - fires when message from server received\n * @param {Function} options.onclose - fires when connection have been closed\n *\n * @returns {{send: send}}\n */\nmodule.exports = function (options) {\n    var ws = null,\n        logger = __webpack_require__(0);\n\n    var STATES = {\n        CONNECTING: 0,\n        OPEN: 1,\n        CLOSING: 2,\n        CLOSED: 3\n    };\n\n    /**\n     * Open new websocket connection\n     * Returns promise, resolved if connection was opened and rejected on error\n     *\n     * @returns {Promise}\n     */\n    var init = function init() {\n        return new Promise(function (resolve, reject) {\n            var protocol = 'ws' + (options.secure ? 's' : '') + '://',\n                host = options.host || 'localhost',\n                path = options.path ? '/' + options.path : '',\n                port = options.port ? ':' + options.port : '',\n                url = protocol + host + port + path;\n\n            ws = new WebSocket(url);\n\n            if (typeof options.onmessage === 'function') {\n                ws.onmessage = options.onmessage;\n            }\n\n            ws.onclose = function (e) {\n                if (typeof options.onclose === 'function') {\n                    options.onclose.call(this, e);\n                }\n\n                reject();\n            };\n\n            ws.onopen = function (e) {\n                if (typeof options.onopen === 'function') {\n                    options.onopen.call(this, e);\n                }\n\n                resolve();\n            };\n        });\n    };\n\n    /**\n     * Try to open new websocket connection.\n     * Returns promise, resolved if reconnect was successful, rejected otherwise\n     *\n     * @param attempts - number of reconnect attempts. 1 by default\n     * @returns {Promise}\n     */\n    var reconnect = function reconnect() {\n        var attempts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 1;\n\n        return new Promise(function (resolve, reject) {\n            init().then(function () {\n                logger.log('Successfully reconnect to socket server', 'info');\n                resolve();\n            }, function () {\n                if (attempts > 0) {\n                    reconnect(attempts - 1).then(resolve, reject);\n                } else {\n                    logger.log('Can\\'t reconnect to socket server', 'warn');\n                    reject();\n                }\n            }).catch(function (e) {\n                logger.log('Error while reconnecting to socket server', 'error', e);\n            });\n        });\n    };\n\n    /**\n     * Send data to WebSocket server in JSON format\n     * @param data\n     */\n    var send = function send(data) {\n        if (ws === null) {\n            return;\n        }\n\n        data = JSON.stringify(data);\n\n        if (ws.readyState !== STATES.OPEN) {\n            reconnect().then(function () {\n                ws.send(data);\n            }, function () {\n                logger.log('Can\\'t send your data', 'warn');\n            });\n        } else {\n            ws.send(data);\n        }\n    };\n\n    init().catch(function (e) {\n        logger.log('Error while opening socket connection', 'error', e);\n    });\n\n    return {\n        send: send\n    };\n};\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// hawk.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 528c47b8a926fca75e52","/**\n * Logger module\n *\n * @usage\n * logger.log('We got an error', 'error')\n *\n * @param message\n * @param type - log type: error, warn, info, log, etc.\n * @param {*} arg - logging argument\n */\nmodule.exports.log = function (message, type, arg) {\n    type = type || 'info';\n\n    message = '[CodeX Hawk]: ' + message;\n\n    if ('console' in window && window.console[type]) {\n        if ( arg !== undefined ) {\n            window.console[type](message, arg);\n        } else {\n            window.console[type](message);\n        }\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/logger.js","/*!\n * Codex Hawk client side module\n * https://github.com/codex-team/hawk.client\n *\n * Codex Hawk - https://hawk.so\n * Codex Team - https://ifmo.su\n *\n * @license MIT (c) CodeX 2017\n */\nmodule.exports = function () {\n    'use strict';\n\n    let config = require('../config'),\n        websocket = require('./websocket'),\n        logger = require('./logger'),\n        ws = null,\n        _token,\n        _revision;\n\n    /**\n     * Hawk client constructor\n     * @param  {string} token      personal token\n     * @param  {string} host        optional: client catcher hostname\n     * @param  {Number} port        optional: client catcher port\n     * @param  {string} path        hawk catcher route\n     * @param  {Boolean} secure     pass FALSE to disable secure connection\n     * @param  {string} revision    identifier of bundle's revision\n     */\n    let init = function ({token, host, port, path, secure, revision}) {\n        config.socket.host = host || config.socket.host;\n        config.socket.port = port || config.socket.port;\n        config.socket.path = path || config.socket.path;\n        config.socket.secure = secure !== undefined ? secure : config.socket.secure;\n\n        if (!token) {\n            logger.log('Please, pass your verification token for Hawk error tracker. You can get it on hawk.so', 'warn');\n            return;\n        }\n\n        _token = token;\n\n        if (revision) {\n            _revision = revision;\n        }\n\n        let socket = config.socket;\n\n        socket.onmessage = socketHandlers.message;\n        socket.onclose = socketHandlers.close;\n\n        ws = websocket(socket);\n\n        window.addEventListener('error', errorHandler);\n    };\n\n    let socketHandlers = {\n\n        message: function (data) {\n            let message, type;\n\n            try {\n                data = JSON.parse(data.data);\n                type = data.type;\n                message = data.message;\n            } catch (e) {\n                message = data.data;\n                type = 'info';\n            }\n\n            logger.log('Hawk says: ' + message, type);\n        },\n\n        close: function () {\n            logger.log('Connection lost. Errors won\\'t be save. Please, refresh the page', 'warn');\n        }\n\n    };\n\n    /**\n     * Error event handler.\n     * Get error params and send to Hawk server\n     *\n     * @param ErrorEvent\n     */\n    let errorHandler = function (ErrorEvent) {\n        let error = {\n            token: _token,\n            message: ErrorEvent.message,\n            'error_location': {\n                file: ErrorEvent.filename,\n                line: ErrorEvent.lineno,\n                col: ErrorEvent.colno,\n                revision: _revision || null,\n            },\n            location: {\n                url: window.location.href,\n                origin: window.location.origin,\n                host: window.location.hostname,\n                path: window.location.pathname,\n                port: window.location.port\n            },\n            stack: ErrorEvent.error.stack || ErrorEvent.error.stacktrace,\n            time: Date.now(),\n            navigator: {\n                ua: window.navigator.userAgent,\n                frame: {\n                    width: window.innerWidth,\n                    height: window.innerHeight\n                }\n            }\n        };\n\n        ws.send(error);\n    };\n\n    let test = function () {\n        let fakeEvent = {\n            message: 'Hawk client catcher test',\n            filename: 'hawk.js',\n            lineno: 0,\n            colno: 0,\n            error: {\n                stack: 'hawk.js'\n            }\n        };\n\n        errorHandler(fakeEvent);\n    };\n\n    return {\n        init: init,\n        test: test\n    };\n}();\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/hawk.js","module.exports = {\n\n    socket: {\n        host: 'hawk.so',\n        path: 'catcher/client',\n        port: 8070,\n        secure: true\n    }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","module.exports = require('./modules/hawk');\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * Native websocket module\n * Open new websocket connection using native WebSocket object\n *\n * @usage\n * var ws = new websocket({\n *  host: 'localhost',\n *  path: 'socket',\n *  port: 80000,\n *  onmessage: messageHandler\n * })\n *\n * @param {Object} options\n *\n * Server properties\n * @param {String} options.host - WebSocket server host\n * @param {String} options.path - WebSocket server path\n * @param {Number} options.port - WebSocket server port\n * @param {Boolean} options.secure - if True, uses wss protocol, else ws\n *\n * Events handlers\n * @param {Function} options.onopen - fires when connection have been opened\n * @param {Function} options.onmessage - fires when message from server received\n * @param {Function} options.onclose - fires when connection have been closed\n *\n * @returns {{send: send}}\n */\nmodule.exports = function (options) {\n    let ws = null,\n        logger = require('./logger');\n\n    const STATES = {\n        CONNECTING: 0,\n        OPEN: 1,\n        CLOSING: 2,\n        CLOSED: 3\n    };\n\n    /**\n     * Open new websocket connection\n     * Returns promise, resolved if connection was opened and rejected on error\n     *\n     * @returns {Promise}\n     */\n    let init = function () {\n        return new Promise(function (resolve, reject) {\n            let protocol = 'ws' + (options.secure ? 's' : '') + '://',\n                host = options.host || 'localhost',\n                path = options.path ? '/' + options.path : '',\n                port = options.port ? ':' + options.port : '',\n                url = protocol + host + port + path;\n\n            ws = new WebSocket(url);\n\n            if (typeof options.onmessage === 'function') {\n                ws.onmessage = options.onmessage;\n            }\n\n            ws.onclose = function (e) {\n                if (typeof options.onclose === 'function') {\n                    options.onclose.call(this, e);\n                }\n\n                reject();\n            };\n\n            ws.onopen = function (e) {\n                if (typeof options.onopen === 'function') {\n                    options.onopen.call(this, e);\n                }\n\n                resolve();\n            };\n        });\n    };\n\n    /**\n     * Try to open new websocket connection.\n     * Returns promise, resolved if reconnect was successful, rejected otherwise\n     *\n     * @param attempts - number of reconnect attempts. 1 by default\n     * @returns {Promise}\n     */\n    let reconnect = function (attempts=1) {\n        return new Promise(function (resolve, reject) {\n            init()\n                .then(function () {\n                    logger.log('Successfully reconnect to socket server', 'info');\n                    resolve();\n                },\n                function () {\n                    if (attempts > 0) {\n                        reconnect(attempts - 1)\n                            .then(resolve, reject);\n                    } else {\n                        logger.log('Can\\'t reconnect to socket server', 'warn');\n                        reject();\n                    }\n                })\n                .catch(function (e) {\n                    logger.log('Error while reconnecting to socket server', 'error', e);\n                });\n        });\n    };\n\n    /**\n     * Send data to WebSocket server in JSON format\n     * @param data\n     */\n    let send = function (data) {\n        if (ws === null) {\n            return;\n        }\n\n        data = JSON.stringify(data);\n\n        if (ws.readyState !== STATES.OPEN) {\n            reconnect()\n                .then(function () {\n                    ws.send(data);\n                },\n                function () {\n                    logger.log('Can\\'t send your data', 'warn');\n                });\n        } else {\n            ws.send(data);\n        }\n    };\n\n    init()\n        .catch(function (e) {\n            logger.log('Error while opening socket connection', 'error', e);\n        });\n\n    return {\n        send: send,\n    };\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/websocket.js"],"sourceRoot":""}